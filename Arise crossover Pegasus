--[[ 
  Ø³ÙƒØ±Ø¨Øª Pegasus Ø§Ù„Ø®Ø§Øµ - Ù†Ø³Ø®Ø© Ù…Ø®ØµØµØ©
  Auto Farm Ù…ØªØ·ÙˆØ± Ù„Ù€ Arise Crossover
]]

local WinterRaidMapName = "Winter Raid"
local AutoFarmEnabled = false
local BoostDamage = false
local lastPauseTime = tick()

local function getFarmDelay()
    local mapName = game:GetService("Workspace"):FindFirstChild("PlaceName")
    if mapName and mapName:IsA("StringValue") then
        if mapName.Value == WinterRaidMapName then
            return math.random(18, 19) / 10 -- ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ù„Ø±Ø§ÙŠØ¯
        else
            return 0 -- Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ± Ø¨Ø§Ù„Ø¯Ù†Ø¬Ù†Ø²
        end
    end
    return 1.5
end

local function isInWinterRaid()
    local placeName = game:GetService("Workspace"):FindFirstChild("PlaceName")
    if placeName and placeName:IsA("StringValue") then
        return placeName.Value == WinterRaidMapName
    end
    return false
end

local function findNearestNPC()
    local nearestNPC = nil
    local shortestDistance = math.huge
    for _, npc in pairs(game:GetService("Workspace").NPCs:GetChildren()) do
        if npc:FindFirstChild("Humanoid") and npc.Humanoid.Health > 0 then
            local distance = (npc.PrimaryPart.Position - game.Players.LocalPlayer.Character.PrimaryPart.Position).Magnitude
            if distance < shortestDistance then
                nearestNPC = npc
                shortestDistance = distance
            end
        end
    end
    return nearestNPC
end

local function attackTarget(target)
    if target and target:FindFirstChild("Humanoid") then
        repeat
            pcall(function()
                if BoostDamage then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.PrimaryPart.CFrame * CFrame.new(0, 0, 2)
                else
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.PrimaryPart.CFrame * CFrame.new(0, 0, 3)
                end
                game:GetService("ReplicatedStorage").Remotes.Damage:FireServer(target)
            end)
            task.wait(BoostDamage and 0.2 or 0.5)
        until target.Humanoid.Health <= 0 or not AutoFarmEnabled
    end
end

local function autoFarm()
    while AutoFarmEnabled do
        local delay = getFarmDelay()
        local npc = findNearestNPC()
        if npc then
            attackTarget(npc)
        end

        if tick() - lastPauseTime >= 1800 then
            AutoFarmEnabled = false
            game.StarterGui:SetCore("ChatMakeSystemMessage", {
                Text = "â¸ï¸ ØªÙˆÙ‚Ù Ù…Ø¤Ù‚Øª Ù„Ù„Ø³Ù„Ø§Ù…Ø©...";
                Color = Color3.fromRGB(255, 255, 0);
            })
            task.wait(60)
            AutoFarmEnabled = true
            lastPauseTime = tick()
        end

        task.wait(delay)
    end
end

game.Players.LocalPlayer.Chatted:Connect(function(msg)
    msg = msg:lower()
    if msg == "!farm on" then
        AutoFarmEnabled = true
        lastPauseTime = tick()
        task.spawn(autoFarm)
        game.StarterGui:SetCore("ChatMakeSystemMessage", {
            Text = "âœ… Ø¨Ø¯Ø£ Ø§Ù„ÙØ§Ø±Ù… Pegasus Style!";
            Color = Color3.fromRGB(0, 255, 0);
        })
    elseif msg == "!farm off" then
        AutoFarmEnabled = false
        game.StarterGui:SetCore("ChatMakeSystemMessage", {
            Text = "ğŸ›‘ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙØ§Ø±Ù….";
            Color = Color3.fromRGB(255, 165, 0);
        })
    elseif msg == "!boost on" then
        BoostDamage = true
        game.StarterGui:SetCore("ChatMakeSystemMessage", {
            Text = "âš¡ ØªÙ… ØªÙØ¹ÙŠÙ„ ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¶Ø±Ø¨ Ù„Ù„Ø¨ÙˆØ³Ø§Øª!";
            Color = Color3.fromRGB(0, 255, 255);
        })
    elseif msg == "!boost off" then
        BoostDamage = false
        game.StarterGui:SetCore("ChatMakeSystemMessage", {
            Text = "âš¡ ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ØªØ³Ø±ÙŠØ¹.";
            Color = Color3.fromRGB(255, 100, 0);
        })
    end
end)

print("ğŸ”µ
