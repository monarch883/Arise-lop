--[[
  سكربت Pegasus المطور لـ Arise Crossover
  الإصدار: 2.5 (مدمج)
  الميزات:
  - واجهة رسومية للهاتف
  - فارم تلقائي ذكي
  - تأخير قابل للتعديل حسب الخريطة
  - سرعة ضرب متغيرة
  - تحسينات خاصة بـ Winter Raid وقلعة الجحيم
]]

loadstring(game:HttpGet("https://raw.githubusercontent.com/JustLevel/goombahub/main/AriseCrossover.lua", true))()

-- ========== الإعدادات الأساسية ========== --
local WinterRaidMapName = "Winter Raid"
local HellCastleMapName = "Hell Castle"
local AutoFarmEnabled = false
local BoostDamage = false
local lastPauseTime = tick()

-- ========== تحسينات السكربت الثاني ========== --
local function getFarmDelay()
    local mapName = game:GetService("Workspace"):FindFirstChild("PlaceName")
    if mapName and mapName:IsA("StringValue") then
        if mapName.Value == WinterRaidMapName then
            return math.random(18, 19) / 10 -- تأخير بسيط للرايد
        elseif mapName.Value == HellCastleMapName then
            return 0.3 -- سرعة فارم عالية في قلعة الجحيم
        else
            return 0 -- بدون تأخير في الدنجنز العادية
        end
    end
    return 1.5
end

local function adjustAttackSpeed()
    if BoostDamage then
        return math.random(0.2, 0.3) -- سرعة ضرب عالية للبوسات
    else
        return math.random(0.4, 0.5) -- سرعة ضرب عادية
    end
end

local function findNearestNPC()
    local nearestNPC = nil
    local shortestDistance = math.huge
    for _, npc in pairs(game:GetService("Workspace").NPCs:GetChildren()) do
        if npc:FindFirstChild("Humanoid") and npc.Humanoid.Health > 0 then
            local distance = (npc.PrimaryPart.Position - game.Players.LocalPlayer.Character.PrimaryPart.Position).Magnitude
            if distance < shortestDistance then
                nearestNPC = npc
                shortestDistance = distance
            end
        end
    end
    return nearestNPC
end

local function attackTarget(target)
    if target and target:FindFirstChild("Humanoid") then
        repeat
            pcall(function()
                if BoostDamage then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.PrimaryPart.CFrame * CFrame.new(0, 0, 2)
                else
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.PrimaryPart.CFrame * CFrame.new(0, 0, 3)
                end
                game:GetService("ReplicatedStorage").Remotes.Damage:FireServer(target)
            end)
            task.wait(adjustAttackSpeed())
        until target.Humanoid.Health <= 0 or not AutoFarmEnabled
    end
end

-- ========== الواجهة الرسومية ========== --
local function createMobileGUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AriseCrossoverMobileGUI"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local toggleButton = Instance.new("TextButton")
    toggleButton.Name = "ToggleButton"
    toggleButton.Size = UDim2.new(0, 150, 0, 60)
    toggleButton.Position = UDim2.new(0.8, 0, 0.9, 0)
    toggleButton.Text = "إيقاف السكربت"
    toggleButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
    toggleButton.TextColor3 = Color3.new(1, 1, 1)
    toggleButton.Font = Enum.Font.GothamBold
    toggleButton.TextSize = 14
    toggleButton.Parent = screenGui

    -- علامة مائية
    local watermark = Instance.new("TextLabel")
    watermark.Name = "Watermark"
    watermark.Text = "Pegasus Script v2.5"
    watermark.Size = UDim2.new(0, 200, 0, 30)
    watermark.Position = UDim2.new(0.01, 0, 0.95, 0)
    watermark.TextColor3 = Color3.fromRGB(255, 255, 255)
    watermark.BackgroundTransparency = 1
    watermark.Font = Enum.Font.GothamBold
    watermark.TextSize = 14
    watermark.Parent = screenGui

    toggleButton.MouseButton1Click:Connect(function()
        AutoFarmEnabled = not AutoFarmEnabled
        toggleButton.Text = AutoFarmEnabled and "إيقاف السكربت" or "تشغيل السكربت"
        toggleButton.BackgroundColor3 = AutoFarmEnabled and Color3.fromRGB(200, 60, 60) or Color3.fromRGB(60, 200, 60)
        
        if AutoFarmEnabled then
            lastPauseTime = tick()
            task.spawn(autoFarm)
        end
    end)
end

-- ========== الدالة الرئيسية للفارم ========== --
local function autoFarm()
    while AutoFarmEnabled do
        local delay = getFarmDelay()
        local npc = findNearestNPC()
        if npc then
            attackTarget(npc)
        end

        -- إيقاف مؤقت للسلامة كل 30 دقيقة
        if tick() - lastPauseTime >= 1800 then
            AutoFarmEnabled = false
            game.StarterGui:SetCore("ChatMakeSystemMessage", {
                Text = "⏸️ توقف مؤقت للسلامة...";
                Color = Color3.fromRGB(255, 255, 0);
            })
            task.wait(60)
            AutoFarmEnabled = true
            lastPauseTime = tick()
        end

        task.wait(delay)
    end
end

-- ========== التشغيل الأولي ========== --
createMobileGUI()
game.StarterGui:SetCore("ChatMakeSystemMessage", {
    Text = "✅ تم تفعيل سكربت Pegasus بنجاح!";
    Color = Color3.fromRGB(0, 255, 0);
})

print("🔵 سكربت Pegasus جاهز للعمل!")
